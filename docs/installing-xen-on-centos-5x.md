---
id: 104
title: Installing XEN on CentOS 5.x
date: 2009-03-16T19:16:39+02:00
author: George
layout: post
guid: http://www.how2centos.com/?p=104
permalink: /installing-xen-on-centos-5x/
dsq_thread_id:
  - "44438359"
categories:
  - CentOS 5.2 Tutorials
  - CentOS 5.3 Tutorials
  - CentOS 5.4 Tutorials
  - CentOS 5.5 Tutorials
tags:
  - centos 5.2
  - xen
---
[<img loading="lazy" src="http://www.how2centos.com/wp-content/uploads/2009/05/centos.gif" alt="centos" title="centos" width="42" height="40" class="alignleft size-full wp-image-225" />](http://www.how2centos.com/wp-content/uploads/2009/05/centos.gif)This is a very simple installation of XEN visualization that I will be using in future posts as a reference.

<!--more-->

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># yum groupinstall Virtualization
</pre>

Edit grub.conf to reflect the correct default Kernel

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># vi /etc/grub.conf
</pre>

<pre class="theme:github font:droid-sans-mono lang:vim decode:true" ># grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/VolGroup00/LogVol00
#          initrd /initrd-version.img
#boot=/dev/sda
default=0
timeout=1
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title CentOS (2.6.18-92.1.10.el5xen)
        root (hd0,0)
        kernel /xen.gz-3.3.0
        module /vmlinuz-2.6.18-92.1.10.el5xen ro root=/dev/VolGroup00/LogVol00
        module /initrd-2.6.18-92.1.10.el5xen.img
title CentOS (2.6.18-92.1.10.el5)
        root (hd0,0)
        kernel /vmlinuz-2.6.18-92.1.10.el5 ro root=/dev/VolGroup00/LogVol00
        initrd /initrd-2.6.18-92.1.10.el5.img
title CentOS (2.6.18-92.el5)
        root (hd0,0)
        kernel /vmlinuz-2.6.18-92.el5 ro root=/dev/VolGroup00/LogVol00
        initrd /initrd-2.6.18-92.el5.img
</pre>

Reboot the machine for new XEN kernel to take effect

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># reboot
</pre>

After the reboot check the Kernel to reflect the change

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># uname -r

 2.6.18-53.1.21.el5xen
</pre>

**  
Install a CentOS 32 bit Virtual Machine using virt-install and your local [YUM repository](http://www.how2centos.com/creating-a-local-yum-repository-on-centos-5x/)  
** 

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># virt-install -p --location=http://server1.example.co.za/centos/5/os/i386 --noautoconsole \
 --name=machine --ram=284 --file=/path/to/machine.img --file-size=5 --nographics -b xenbr0
</pre>

Some useful commands

<pre class="toolbar:2 nums:false nums-toggle:false theme:github font:droid-sans-mono whitespace-before:1 whitespace-after:1 lang:default decode:true"># xm list
# xm create vmmachine
# xm console vmmachine
</pre>